<ng-include  ng-hide="!getUser()" src="'views/header.html'" class="header-wrapper"></ng-include>

<main>
	<!-- This is where all Html for the view goes. -->
  <ng-include ng-show="!getUser()" src="'views/error.html'"></ng-include>
	
  <div ng-hide="!getUser()" class="container-fluid">
    <div class="row profile-content">
  		<div class="col-sm-3 col-sm-offset-1 col-xs-12">        
        	<h1 ng-show="userData.display_name">{{userData.display_name}}</h1>
          <h1 ng-show="!userData.display_name">{{userData.id}}</h1>
          <img class="media-object" ng-show="userData.images[0].url" ng-src="{{userData.images[0].url}}" alt="No image">
          <img class="media-object" ng-show="!userData.images[0].url" ng-src="http://orig13.deviantart.net/c751/f/2010/017/b/3/avatar_self_portrait_by_nuria.jpg" alt="No image">
          
          <div class="info-block">
              <dt class="info-title">Top artists</dt><dd  ng-repeat="artist in topArtists"><a class="info-text" href="{{artist.external_urls.spotify}}">{{artist.name}}</a></dd>
          </div>

          <div class="info-block">
              <dt class="info-title">Top tracks</dt>
              <dd ng-repeat="track in topTracks">
                <a class="info-text" href="{{track.external_urls.spotify}}">{{track.name}} - {{track.artists[0].name}}</a>
              </dd>
          </div>
          
          <div class="info-block">
              <dt class="info-title">Spotify link</dt><dd><a class="info-text" href="{{userData.external_urls.spotify}}">Your profile</a></dd>   
          </div>

      </div>
      
      <div class="col-sm-8">
      	<h1 class="profile-title col-sm-6">Your Playlists</h1>
      	<input class="playlist-search col-sm-3" ng-model="search" placeholder="Search..." autofocus>



      	<div class="grid col-sm-12 col-xs-12">
      		<ul class="col-xs-12 profile-playlists">
      		<li class="inner-grid col-sm-3 col-xs-6" ng-repeat="playlist in playlists | filter: search:strictfunction">

	      		<a href="{{playlist.external_urls.spotify}}">
              <img class="top-images" ng-src="{{playlist.images[0].url}}"/>
            </a>
              <p class="playlist-title">
                {{playlist.name}}
              </p>
              <div ng-init="checkLink(playlist)" ng-hide="playlist.shared">
                 <div ng-show="loading">
                <img id="loader-small" src="/resources/rolling.gif" ></img>
                </div>
                <p class="info-text">
                  <a class="info-text" href="{{playlist.external_urls.spotify}}">Listen on Spotify</a>
                </p>
                <p class="info-text">
                  <button type="button" class="btn btn-success" ng-click="genLink(playlist)">Put up to vote</button>
                  {{playlist.status}}
                </p>
              </div>
              <div ng-show="playlist.shared">
                <p class="info-text">Share this link: </p>
                <a href="{{playlist.link}}" target="_blank" class="link-text">{{playlist.link}}</a>
                <p>
                  <button type="button" class="btn btn-warning" ng-click="stopSharing(playlist)">Close vote</button>
                </p>
              </div>

            </li>   
        </div>
      </div>
    </div>
	</div>

</main>

<ng-include src="'views/footer.html'" class="footer-wrapper"></ng-include>
